<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <title>Custom Karussell</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
    }

    .carousel {
      position: relative;
      max-width: 1440px;
      height: 450px;
      overflow: hidden;
      margin: 60px auto;
    }

    .carousel .slides {
      display: flex;
      transition: transform 0.6s ease-in-out;
    }

    .carousel .slide {
      flex: 0 0 75%;
      /* etwas schmaler, damit Nachbar sichtbar bleibt */
      margin: 0 10px;
      height: 100%;
      border-radius: 15px;
      overflow: hidden;
      transition: transform 0.5s, opacity 0.5s;
      opacity: 0.6;
      transform: scale(0.9);
      display: flex;
      background-color: black;
      align-items: center;
    }

    .carousel .slide.active {
      transform: scale(1);
      opacity: 1;
      z-index: 2;
    }

    /* Linker Block */
    .carousel .left {
      width: 40%;
      background: black;
      clip-path: polygon(0 0, 90% 0, 70% 100%, 0% 100%);
      color: white;
      padding: 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .carousel .left h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .carousel .left p {
      font-size: 18px;
      margin-bottom: 15px;
    }

    .carousel .btn {
      width: 70%;
      background: #ff6600;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      border-radius: 20px;
      transition: 0.3s;
      font-size: 20px;
    }

    .carousel .btn:hover {
      background: #e65c00;
    }

    /* Rechter Block */
    .carousel .right {
      width: 60%;
      position: relative;
      clip-path: polygon(20% 0, 100% 0, 100% 100%, 0% 100%);
      overflow: hidden;
    }

    .carousel .right img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .carousel .badge {
      width: 80px;
      height: 80px;
      position: absolute;
      top: 15px;
      right: 15px;
      background: linear-gradient(45deg, #ff6600, #ff3c00);
      color: white;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-size: 14px;
      text-align: center;
    }

    /* Dots */
    .carousel .dots {
      position: absolute;
      width: 100%;
      text-align: center;
      bottom: 10px;
    }

    .carousel .dots span {
      display: inline-block;
      width: 10px;
      height: 10px;
      margin: 0 5px;
      background: #bbb;
      border-radius: 50%;
      cursor: pointer;
    }

    .carousel .dots .active {
      background: #ff6600;
    }

    /* Mobile Anpassungen */
    @media (max-width: 768px) {
      .carousel {
        height: auto;
      }

      .carousel .slide {
        flex: 0 0 85%;
        /* fast volle Breite, kleiner Rand sichtbar */
        margin: 0 8px;
        flex-direction: column;
        height: auto;
      }

      .carousel .left,
      .carousel .right {
        width: 100%;
        clip-path: none;
      }

      .carousel .left {
        padding: 20px;
      }

      .carousel .right img {
        height: auto;
        max-height: 300px;
      }

      .carousel .btn {
        text-align: left;
        width: 55%;
        font-size: 18px;
      }
    }
  </style>
</head>

<body>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const target = document.querySelector(".cms-section.pos-1.cms-section-default");

      if (target) {
        target.innerHTML = "";

        target.innerHTML = ` 
          <div class="carousel"> 
            <div class="slides"> 
              <!-- Slide 1 --> 
              <div class="slide"> 
                <div class="left"> 
                  <h2>SOMMERARTIKEL</h2> 
                  <p>bis 25% Rabatt</p> 
                  <button class="btn">Jetzt sichern</button> 
                </div> 
                <div class="right"> 
                  <img src="https://picsum.photos/id/1015/800/500" alt="Promo 1"> 
                  <div class="badge">% SALE</div> 
                </div> 
              </div> 
              <!-- Slide 2 --> 
              <div class="slide"> 
                <div class="left"> 
                  <h2>WINTER SPECIAL</h2> 
                  <p>bis 30% Rabatt</p> 
                  <button class="btn">Jetzt kaufen</button> 
                </div> 
                <div class="right"> 
                  <img src="https://picsum.photos/id/1018/800/500" alt="Promo 2"> 
                  <div class="badge">% SALE</div> 
                </div> 
              </div> 
              <!-- Slide 3 --> 
              <div class="slide"> 
                <div class="left"> 
                  <h2>HERBST DEALS</h2> 
                  <p>bis 40% Rabatt</p> 
                  <button class="btn">Angebot sichern</button> 
                </div> 
                <div class="right"> 
                  <img src="https://picsum.photos/id/1020/800/500" alt="Promo 3"> 
                  <div class="badge">% SALE</div> 
                </div> 
              </div>
              <!-- Slide 4 --> 
              <div class="slide"> 
                <div class="left"> 
                  <h2>FRÃœHLINGSANGEBOTE</h2> 
                  <p>bis 20% Rabatt</p> 
                  <button class="btn">Jetzt entdecken</button> 
                </div> 
                <div class="right"> 
                  <img src="https://picsum.photos/id/1035/800/500" alt="Promo 4"> 
                  <div class="badge">% SALE</div> 
                </div> 
              </div>
            </div> 
            <div class="dots"></div> 
          </div> 
        `;

        initCarousel();
      }

      function initCarousel() {
        const slidesContainer = document.querySelector(".slides");
        const slides = document.querySelectorAll(".slide");
        const dotsContainer = document.querySelector(".dots");

        let index = 0;

        // Dots erstellen 
        slides.forEach((_, i) => {
          const dot = document.createElement("span");
          if (i === 0) dot.classList.add("active");
          dot.addEventListener("click", () => {
            index = i;
            updateCarousel();
          });
          dotsContainer.appendChild(dot);
        });

        const dots = document.querySelectorAll(".dots span");

        function updateCarousel() {
          const slideWidth = slides[0].offsetWidth + 20; // inkl. Margin
          const containerWidth = slidesContainer.parentElement.offsetWidth;

          // Offset berechnen, sodass immer ein Teil sichtbar bleibt
          const offset = (containerWidth - slideWidth) / 2;

          slidesContainer.style.transform = `translateX(${-index * slideWidth + offset}px)`;

          slides.forEach((slide, i) => {
            slide.classList.toggle("active", i === index);
          });

          dots.forEach((dot, i) => {
            dot.classList.toggle("active", i === index);
          });
        }

        window.addEventListener("resize", updateCarousel);
        updateCarousel();
      }
    });
  </script>
</body>

</html>